# Lykos Wallet â€” AWS (EC2 + RDS)
# Use when Postgres is RDS; no postgres service here.
# Set in .env: DATABASE_URL, JWT_SECRET, CORS_ORIGIN, RPC URLs.

services:
  backend:
    build: .
    environment:
      NODE_ENV: production
      DATABASE_URL: ${DATABASE_URL:?DATABASE_URL required}
      JWT_SECRET: ${JWT_SECRET:?JWT_SECRET required}
      CORS_ORIGIN: ${CORS_ORIGIN:?CORS_ORIGIN required}
      ETHEREUM_RPC_URL: ${ETHEREUM_RPC_URL:-}
      SEPOLIA_RPC_URL: ${SEPOLIA_RPC_URL:-}
      OPTIMISM_RPC_URL: ${OPTIMISM_RPC_URL:-}
      POLYGON_RPC_URL: ${POLYGON_RPC_URL:-}
      BASE_RPC_URL: ${BASE_RPC_URL:-}
      ARBITRUM_RPC_URL: ${ARBITRUM_RPC_URL:-}
      ALCHEMY_API_KEY: ${ALCHEMY_API_KEY:-}
    ports:
      - "3000:3000"

  frontend:
    build:
      context: ./frontend
      args:
        VITE_API_URL: /api
    depends_on:
      - backend
    ports:
      - "80:80"
